<app-spinner filterBy="userLogin"></app-spinner>
<ng-container *ngIf="!loading">
  <ng-container *ngIf="!token">
  <div class="row justify-content-center">
    <div class="col-md-6 grid-margin stretch-card">
      <div class="card">
        <div class="card-body">

          <form [formGroup]="resetPasswordRequestForm" class="forms-sample text-right">
            <h4 class="font-weight-light text-left">Смена пароля</h4>
            <p class="card-description text-danger text-left">
              {{answer}}
            </p>
            <div class="form-group row">
              <mat-form-field class="example-full-width w-100">
                <mat-label>Email</mat-label>
                <input matInput formControlName="email" placeholder="Ex. pat@example.com">
              </mat-form-field>
            </div>

            <button type="submit" class="btn btn-start-time ml-auto" (click)="onSubmitRequest()" [disabled]="!resetPasswordRequestForm.valid">Submit</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  </ng-container>
  <ng-container *ngIf="token">
    <div class="row justify-content-center">
      <div class="col-md-6 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">

            <form [formGroup]="resetPasswordResponseForm" class="forms-sample text-right">
              <h4 class="font-weight-light text-left">Новый пароля</h4>
              <p class="card-description text-danger text-left">
                {{answer}}
              </p>
              <div class="form-group row">
                <mat-form-field class="example-full-width w-100">
                  <mat-label>Email</mat-label>
                  <input matInput formControlName="email" placeholder="Ex. pat@example.com">
                  <mat-error *ngIf="resetPasswordResponseForm.hasError('email') && !resetPasswordResponseForm.hasError('required')">
                    Please enter a valid email address
                  </mat-error>
                  <mat-error *ngIf="resetPasswordResponseForm.hasError('required')">
                    Email is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="form-group row">
                <mat-form-field class="w-100">
                  <input matInput type="password" placeholder="Password" formControlName="password" (input)="onPasswordInput()">
                  <mat-error *ngIf="password.hasError('required')">Password is required</mat-error>
                  <mat-error *ngIf="password.hasError('minlength')">Password must have at least 8 characters</mat-error>
                </mat-form-field>
              </div>
              <div class="form-group row">
                <mat-form-field class="w-100">
                  <input matInput type="password" placeholder="Confirm password" formControlName="password_confirmation" (input)="onPasswordInput()">
                  <mat-error *ngIf="password2.hasError('required')">Please confirm your password</mat-error>
                  <mat-error *ngIf="password2.invalid && !password2.hasError('required')">Passwords don't match</mat-error>
                </mat-form-field>
              </div>

              <button type="submit" class="btn btn-start-time ml-auto" (click)="onSubmitResponse()" [disabled]="!resetPasswordResponseForm.valid">Сменить пароль</button>
            </form>
          </div>
        </div>
      </div>
    </div>

  </ng-container>
</ng-container>
